group: farsinstruct_llama_eval
task:
  - dataset_path: PNLPhub/digikala-sentiment-analysis
    dataset_name: null
    output_type: greedy_until
    # use_prompt: "promptsource:generate_sentiment_fs"
    doc_to_text: "<s> [INST] <<SYS>> \u0628\u0627 \u062A\u0648\u062C\u0647 \u0628\u0647 \u0645\u062A\u0646\
          \ \u0627\u062D\u0633\u0627\u0633 \u062C\u0645\u0644\u0647 \u0631\u0627 \u0628\
          \u0646\u0648\u06CC\u0633 <</SYS>> \n\n\u0645\u062A\u0646:{{Text}}\n\u0627\u062D\u0633\
          \u0627\u0633: [/INST]"
    doc_to_target: "\n{% macro round_score(score) %}\n  {% set quotient = score\
          \ // 25 %}\n  {% set remainder = score % 25 %}\n\n  {% if remainder >= 13 %}\n\
          \    {% set rounded_score = (quotient + 1) * 25 %}\n  {% else %}\n    {% set\
          \ rounded_score = quotient * 25 %}\n  {% endif %}\n\n  {{\n  {\n    '0':  \"\
          \u0627\u0641\u062A\u0636\u0627\u062D\",\n    '25': \"\u0628\u062F\",\n    '50':\
          \ \"\u0645\u062A\u0648\u0633\u0637\",\n    '75': \"\u062E\u0648\u0628\",\n \
          \   '100': \"\u0639\u0627\u0644\u06CC\"\n  }[rounded_score|string]\n}}\n{% endmacro\
          \ %}\n\n{% set rounded_score = round_score(Score) %}\n\n{{rounded_score}}"
    # target_delimiter: "<|startoftext|>"
    training_split: train
    validation_split: validation
    test_split: test
    metric_list:
        - metric: exact_match
          aggregation: mean
          higher_is_better: true
        - metric: bleu
          aggregation: bleu

  - dataset_path: PNLPhub/digikala-sentiment-analysis
    dataset_name: null
    output_type: multiple_choice
    doc_to_text: "<s> [INST] <<SYS>> \u0645\u062A\u0646 \u062F\u0627\u062F\u0647 \u0634\u062F\u0647 \u06A9\u062F\
      \u0627\u0645 \u0627\u062D\u0633\u0627\u0633 \u0631\u0627 \u0645\u0646\u062A\u0642\
      \u0644 \u0645\u06CC\u06A9\u0646\u062F\u061F \u0627\u0641\u062A\u0636\u0627\u062D\
      , \u0628\u062F, \u0645\u062A\u0648\u0633\u0637, \u062E\u0648\u0628, \u0639\u0627\
      \u0644\u06CC <</SYS>> \n\n\u0645\u062A\u0646 : {{Text}}\n\u0627\u062D\u0633\u0627\u0633\
      : \n[/INST]"
    doc_to_target: "\n{% macro round_score(score) %}\n  {% set quotient\
      \ = score // 25 %}\n  {% set remainder = score % 25 %}\n\n  {% if remainder\
      \ >= 13 %}\n    {% set rounded_score = (quotient + 1) * 25 %}\n  {% else %}\n\
      \    {% set rounded_score = quotient * 25 %}\n  {% endif %}\n\n  {{\n  {\n \
      \   '0':  0,\n    '25': 1,\n    '50':  2,\n    '75':  3,\n    '100': 4\n  }[rounded_score|string]|int\n\
      }}\n{% endmacro %}\n\n{% set rounded_score = round_score(Score) %}\n\n{% set\
      \ rounded_score = round_score | int %}\n{% set random = random | int %}\n\n\
      {% if random == rounded_score %}\n \u0628\u0644\u0647\n{% else %}\n \u062E\u06CC\
      \u0631\n{% endif %}\n"
    doc_to_choice: ["\u0628\u0644\u0647", "\u062E\u06CC\u0631"]
    training_split: train
    validation_split: validation
    test_split: test
    metric_list:
      - metric: acc
        aggregation: mean
        higher_is_better: true
        ignore_case: true
        ignore_punctuation: true
